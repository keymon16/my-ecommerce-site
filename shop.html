<!DOCTYPE html>
<html lang="en"><head>
<meta charset="UTF-8"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/>
<title>Dynamic Web Solution for E-commerce</title>
<link rel="stylesheet" href="assets/css/style.css">
<script src="assets/js/data.js"></script>
<script src="assets/js/app.js"></script>
</head>
<body onload="navInit()">
<script>document.write(buildHeader('shop'))</script>
<main class="container">
<section class="hero"><h2>Shop</h2><p>Browse categories, search, sort & filter.</p></section>
<section class="actions" style="gap:10px;align-items:center;flex-wrap:wrap">
  <select id="catSel"><option value="">All Categories</option><option>Shirts</option><option>Pants</option><option>Jackets</option><option>Accessories</option></select>
  <select id="sortSel"><option value="featured">Sort: Featured</option><option value="price-asc">Price: Low to High</option><option value="price-desc">Price: High to Low</option><option value="name-asc">Name: A→Z</option><option value="name-desc">Name: Z→A</option></select>
  <input id="q" placeholder="Search products by name"/>
  <button class="btn" id="clear">Clear</button>
</section>
<section>
  <div class="grid" id="grid"></div>
</section>
<script>
const params = new URLSearchParams(location.search);
const startCat = params.get('category')||'';
document.getElementById('catSel').value = startCat;
function apply(){
  const cat = document.getElementById('catSel').value;
  const sort = document.getElementById('sortSel').value;
  const q = (document.getElementById('q').value||'').toLowerCase();
  let arr = STORE.products.filter(p=>(!cat||p.category===cat) && (!q || p.title.toLowerCase().includes(q)));
  if(sort==='price-asc') arr.sort((a,b)=>priceAfterSale(a)-priceAfterSale(b));
  if(sort==='price-desc') arr.sort((a,b)=>priceAfterSale(b)-priceAfterSale(a));
  if(sort==='name-asc') arr.sort((a,b)=>a.title.localeCompare(b.title));
  if(sort==='name-desc') arr.sort((a,b)=>b.title.localeCompare(a.title));
  document.getElementById('grid').innerHTML = arr.map(productCard).join('');
}
['catSel','sortSel','q'].forEach(id=>document.getElementById(id).addEventListener('input', apply));
document.getElementById('clear').addEventListener('click',()=>{document.getElementById('catSel').value='';document.getElementById('sortSel').value='featured';document.getElementById('q').value='';apply();});
apply();
</script>
</main>
<script>document.write(buildFooter())</script>
</body></html>